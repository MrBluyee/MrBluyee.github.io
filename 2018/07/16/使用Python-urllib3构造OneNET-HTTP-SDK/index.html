<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>使用Python urllib3构造OneNET HTTP SDK | Mr Bluyee's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + '3dbaf3043b34b1c894c4cd063629b6a9';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">使用Python urllib3构造OneNET HTTP SDK</h1><a id="logo" href="/.">Mr Bluyee's Blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">使用Python urllib3构造OneNET HTTP SDK</h1><div class="post-meta">2018-07-16<span> | </span><span class="category"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Python/">学习笔记——Python</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 3.5k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 15</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">开始使用：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="toc-number"></span> <span class="toc-text">API介绍：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">设备：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E5%86%8C%E8%AE%BE%E5%A4%87%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">1.注册设备：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E8%AE%BE%E5%A4%87%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.</span> <span class="toc-text">2.获取指定设备的信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E8%AE%BE%E5%A4%87%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-number">1.3.</span> <span class="toc-text">3.获取所有设备的信息：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BF%AE%E6%94%B9%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-number">1.4.</span> <span class="toc-text">4.修改设备信息：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E8%AE%BE%E5%A4%87%EF%BC%9A"><span class="toc-number">1.5.</span> <span class="toc-text">5.删除设备：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">数据流：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">2.1.</span> <span class="toc-text">1.创建数据流：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E6%B5%81%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">2.修改数据流参数：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">2.3.</span> <span class="toc-text">3.获取数据流：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">2.4.</span> <span class="toc-text">4.删除数据流：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%82%B9%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">数据点：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE%E7%82%B9%EF%BC%9A"><span class="toc-number">3.1.</span> <span class="toc-text">1.新增数据点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E7%82%B9%EF%BC%9A"><span class="toc-number">3.2.</span> <span class="toc-text">2.获取数据点：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">4.</span> <span class="toc-text">二进制数据流：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%B0%E5%A2%9E%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">4.1.</span> <span class="toc-text">1.新增二进制数据流：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">4.2.</span> <span class="toc-text">2.获取二进制数据流：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%96%B0%E5%A2%9E%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">4.3.</span> <span class="toc-text">3.新增文件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-number">4.4.</span> <span class="toc-text">4.获取文件：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%9A"><span class="toc-number">5.</span> <span class="toc-text">触发器：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%9A"><span class="toc-number">5.1.</span> <span class="toc-text">1.创建触发器：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9%E8%A7%A6%E5%8F%91%E5%99%A8%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="toc-number">5.2.</span> <span class="toc-text">2.修改触发器参数：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-number">5.3.</span> <span class="toc-text">3.获取指定触发器信息：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-number">5.4.</span> <span class="toc-text">4.获取所有触发器信息：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%9A"><span class="toc-number">5.5.</span> <span class="toc-text">5.删除触发器：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#APIKEY"><span class="toc-number">6.</span> <span class="toc-text">APIKEY:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BAAPIKey%EF%BC%9A"><span class="toc-number">6.1.</span> <span class="toc-text">1.创建APIKey：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9APIKey%EF%BC%9A"><span class="toc-number">6.2.</span> <span class="toc-text">2.修改APIKey：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96APIKey%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-number">6.3.</span> <span class="toc-text">3.获取APIKey信息：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4APIKey%EF%BC%9A"><span class="toc-number">6.4.</span> <span class="toc-text">4.删除APIKey：</span></a></li></ol></li></ol></div></div><div class="post-content"><p>Python based SDK of OneNET HTTP protocol device<br>环境：Python 3.6<br>库依赖：urllib3 、 urllib 、os 、json<br>说明：onenet_http_api模块使用非常简单，使用该模块，用户不需要将精力放在网络通信接口上，而可以更多的去关注数据内容。<br><a target="_blank" rel="noopener" href="https://github.com/MrBluyee/OneNET_Python_SDK">github源码</a></p>
<span id="more"></span>

<h3 id="开始使用："><a href="#开始使用：" class="headerlink" title="开始使用："></a>开始使用：</h3><p>import 模块：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> onenet_http_api</span><br></pre></td></tr></table></figure>
<p>然后创建一个OneNetHTTPHandle实例。该实例处理与OneNet以HTTP协议通信的所有内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h = onenet_http_api.OneNetHTTPHandle()</span><br></pre></td></tr></table></figure>
<h2 id="API介绍："><a href="#API介绍：" class="headerlink" title="API介绍："></a>API介绍：</h2><h3 id="设备："><a href="#设备：" class="headerlink" title="设备："></a>设备：</h3><h4 id="1-注册设备："><a href="#1-注册设备：" class="headerlink" title="1.注册设备："></a>1.注册设备：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">register_device(master_key,register_code,new_device_authinfo,new_device_name)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key: 为产品的APIKEY<br><br>register_code: 正式环境注册码<br><br>new_device_authinfo: 新建HTTP设备的设备唯一编号<br><br>new_device_name: 新建HTTP设备的设备名<br><br>返回：<br><br>若成功，则返回一个包含device_id和key的dict<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>master_key = <span class="string">&#x27;6K9Nxxxxxxxxxxxxxxxxxx&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register_code = <span class="string">&#x27;1Wxxxxxxxxxxxx3&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>new_device_authinfo = <span class="string">&#x27;201805141201&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>new_device_name = <span class="string">&#x27;device1&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.register_device(master_key,register_code,new_device_authinfo,new_device_name)</span><br><span class="line">&#123;<span class="string">&#x27;device_id&#x27;</span>: <span class="string">&#x27;31036923&#x27;</span>, <span class="string">&#x27;key&#x27;</span>: <span class="string">&#x27;VfmTxxxxxxxxxxxxxxx&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-获取指定设备的信息"><a href="#2-获取指定设备的信息" class="headerlink" title="2.获取指定设备的信息"></a>2.获取指定设备的信息</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_device_info(key,device_id)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>返回：<br><br>若成功，则返回一个包含设备信息的dict<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_device_info(key,device_id)</span><br><span class="line">&#123;<span class="string">&#x27;private&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;protocol&#x27;</span>: <span class="string">&#x27;HTTP&#x27;</span>, <span class="string">&#x27;create_time&#x27;</span>: <span class="string">&#x27;2018-05-14 12:02:40&#x27;</span>, </span><br><span class="line"><span class="string">&#x27;keys&#x27;</span>: [&#123;<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;auto generated device key&#x27;</span>, <span class="string">&#x27;key&#x27;</span>: <span class="string">&#x27;VfmTxxxxxxxxxxxxxxxx=&#x27;</span>&#125;],</span><br><span class="line"> <span class="string">&#x27;online&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;id&#x27;</span>: <span class="string">&#x27;31xxxx&#x27;</span>, <span class="string">&#x27;auth_info&#x27;</span>: <span class="string">&#x27;201805141201&#x27;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;device1&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-获取所有设备的信息："><a href="#3-获取所有设备的信息：" class="headerlink" title="3.获取所有设备的信息："></a>3.获取所有设备的信息：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_all_devices_info(master_key)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>返回：<br><br>若成功，则返回一个包含所有设备信息的dict<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_all_devices_info(master_key)</span><br></pre></td></tr></table></figure>
<h4 id="4-修改设备信息："><a href="#4-修改设备信息：" class="headerlink" title="4.修改设备信息："></a>4.修改设备信息：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modify_device_profile(key,device_id,**profile)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>可选参数：<br><br>“title”: “mydevice”, &#x2F;&#x2F;设备名（可选，最长16个字符）<br><br>“desc”: “some description”, &#x2F;&#x2F;设备描述（可选，最长16个字符）<br><br>“tags”: [“china”,”mobile”] , &#x2F;&#x2F;设备标签（可选）<br><br>“protocol”:”HTTP “, &#x2F;&#x2F;选择一种接入协议（可选）<br><br>“location”: {“lon”:106, “lat”: 29, “ele”: 370},&#x2F;&#x2F;设备位置{“经度”, “纬度”, “高度”}（可选）<br><br>“private”: true| false, &#x2F;&#x2F;设备私密性（可选）<br><br>“auth_info”:”201503041a5829151”, &#x2F;&#x2F;HTTP设备：”设备唯一编号”（可选）<br><br>“other”: {“version”: “1.0.0”, “manufacturer”: “china mobile”} &#x2F;&#x2F;其他信息（可选）<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>profile = &#123;</span><br><span class="line"><span class="meta">... </span><span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;mydevice&#x27;</span>,</span><br><span class="line"><span class="meta">... </span><span class="string">&#x27;desc&#x27;</span>: <span class="string">&#x27;some description&#x27;</span>,</span><br><span class="line"><span class="meta">... </span><span class="string">&#x27;tags&#x27;</span>: [<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;mobile&#x27;</span>],</span><br><span class="line"><span class="meta">... </span><span class="string">&#x27;auth_info&#x27;</span>: <span class="string">&#x27;201805141226&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.modify_device_profile(key,device_id,**profile)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<p>或：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.modify_device_profile(key,device_id,title = <span class="string">&#x27;device1&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="5-删除设备："><a href="#5-删除设备：" class="headerlink" title="5.删除设备："></a>5.删除设备：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete_device(key,device_id)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br></p>
<p>说明：删除设备会删除该设备下所有数据流和数据点。<br><br>删除设备动作是异步的，系统会在后续逐步删除该设备下的数据流和数据点。<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.delete_device(key,device_id)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="数据流："><a href="#数据流：" class="headerlink" title="数据流："></a>数据流：</h3><h4 id="1-创建数据流："><a href="#1-创建数据流：" class="headerlink" title="1.创建数据流："></a>1.创建数据流：</h4><p>（建议在网页上通过设置数据流模板代替）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_device_datastream(key,device_id,stream_id,**profile)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>stream_id：数据流名称<br><br>可选参数：<br><br>“tags”:[“Tag1”,”Tag2”], &#x2F;&#x2F;数据流标签（可选，可以为一个或多个）<br><br>“unit”:”celsius”, &#x2F;&#x2F;单位（可选）<br><br>“unit_symbol”:”C” &#x2F;&#x2F;单位符号（可选）<br><br>返回：<br><br>若成功，则返回包含ds_uuid的dict<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>stream_id = <span class="string">&#x27;datastream&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.create_device_datastream(key,device_id,stream_id)</span><br><span class="line">&#123;<span class="string">&#x27;ds_uuid&#x27;</span>: <span class="string">&#x27;8a9497b0-8863-58a6-8277-xxxxxxxxxxxxxxxxxx&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-修改数据流参数："><a href="#2-修改数据流参数：" class="headerlink" title="2.修改数据流参数："></a>2.修改数据流参数：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modify_device_datastream_profile(key,device_id,stream_id,**profile)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>stream_id：数据流名称<br><br>可选参数：<br><br>“tags”:[“Tag1”,”Tag2”], &#x2F;&#x2F;数据流标签（可选，可以为一个或多个）<br><br>“unit”:”celsius”, &#x2F;&#x2F;单位（可选）<br><br>“unit_symbol”:”C” &#x2F;&#x2F;单位符号（可选）<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>modify_profile = &#123;</span><br><span class="line"><span class="meta">... </span><span class="string">&#x27;tags&#x27;</span>: [<span class="string">&#x27;Tag1&#x27;</span>,<span class="string">&#x27;Tag2&#x27;</span>],</span><br><span class="line"><span class="meta">... </span><span class="string">&#x27;unit&#x27;</span>: <span class="string">&#x27;celsius&#x27;</span>,</span><br><span class="line"><span class="meta">... </span><span class="string">&#x27;unit_symbol&#x27;</span>: <span class="string">&#x27;C&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.modify_device_datastream_profile(key,device_id,stream_id,**modify_profile)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-获取数据流："><a href="#3-获取数据流：" class="headerlink" title="3.获取数据流："></a>3.获取数据流：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_device_datastream(key,device_id,stream_id)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>stream_id：数据流名称<br><br>返回：<br><br>若成功，则返回包含数据流信息的dict<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_device_datastream(key,device_id,stream_id)</span><br><span class="line">[&#123;<span class="string">&#x27;unit&#x27;</span>: <span class="string">&#x27;celsius&#x27;</span>, <span class="string">&#x27;create_time&#x27;</span>: <span class="string">&#x27;2018-05-14 12:35:12&#x27;</span>, <span class="string">&#x27;unit_symbol&#x27;</span>: <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;id&#x27;</span>: <span class="string">&#x27;datastream&#x27;</span>, <span class="string">&#x27;uuid&#x27;</span>: <span class="string">&#x27;8a9497b0-8863-58a6-8277-xxxxxxx&#x27;</span>, <span class="string">&#x27;tags&#x27;</span>: [<span class="string">&#x27;Tag1&#x27;</span>, <span class="string">&#x27;Tag2&#x27;</span>]&#125;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-删除数据流："><a href="#4-删除数据流：" class="headerlink" title="4.删除数据流："></a>4.删除数据流：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete_device_datastream(key,device_id,stream_id)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>stream_id：数据流名称<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.delete_device_datastream(key,device_id,stream_id)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="数据点："><a href="#数据点：" class="headerlink" title="数据点："></a>数据点：</h3><h4 id="1-新增数据点："><a href="#1-新增数据点：" class="headerlink" title="1.新增数据点："></a>1.新增数据点：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_datapoints(key,device_id,datapoints)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>datapoints：数据点<br><br>datapoints格式为：<br><br>datapoints &#x3D; {stream_id:data}<br><br>可选参数：<br><br>local_timestamp：本地时间戳<br><br>格式必须为”YYYY-MM-DDThh:mm:ss”的形式<br><br>(例如：2018-05-14T13:21:12）<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>datapoints = &#123;</span><br><span class="line"><span class="meta">... </span>stream_id:<span class="number">10</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.post_datapoints(key,device_id,datapoints)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datapoints = &#123;</span><br><span class="line"><span class="meta">... </span>stream_id:<span class="string">&#x27;hello&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.post_datapoints(key,device_id,datapoints)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>datapoints = &#123;</span><br><span class="line"><span class="meta">... </span>stream_id:<span class="number">20</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.post_datapoints(key,device_id,datapoints,local_timestamp = <span class="string">&#x27;2018-05-14T13:21:12&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-获取数据点："><a href="#2-获取数据点：" class="headerlink" title="2.获取数据点："></a>2.获取数据点：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_datapoints(key,device_id,**args)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>可选参数：<br><br>datastream_id&#x3D;a,b,c &#x2F;&#x2F;查询的数据流，多个数据流之间用逗号分隔（可选）<br><br>start&#x3D;2015-01-10T08:00:35 &#x2F;&#x2F;提取数据点的开始时间（可选）<br><br>end&#x3D;2015-01-10T08:00:35 &#x2F;&#x2F;提取数据点的结束时间（可选）<br><br>duration&#x3D;3600 &#x2F;&#x2F;查询时间区间（可选，单位为秒）<br><br>（start+duration：按时间顺序返回从start开始一段时间内的数据点）<br><br>（end+duration：按时间倒序返回从end回溯一段时间内的数据点）<br><br>limit&#x3D;100 &#x2F;&#x2F;限定本次请求最多返回的数据点数，0&lt;n&lt;&#x3D;6000（可选，默认1440）<br><br>cursor&#x3D; &#x2F;&#x2F;指定本次请求继续从cursor位置开始提取数据（可选）<br><br>sort&#x3D;DESC | ASC &#x2F;&#x2F;值为DESC|ASC时间排序方式，DESC:倒序，ASC升序，<br><br>（带任何参数或仅携带limit参数-默认降序，其他情况-默认升序）<br><br>返回：<br><br>若成功，则返回选择获取的数据点<br><br>若失败，则返回错误信息<br><br>说明：<br><br>1.若不携带任何可选参数，返回本设备所存在的所有数据流中的最新数据。<br><br>2.若不携带数据流id参数，携带limit参数时，会返回该设备每个数据流最多limit条数据。<br><br>其他情况limit参数用于限制返回数据点总数。<br><br>3.若要查看某一条数据流数据，需在可选参数中携带参数datastream_id。<br><br>4.要查看某一条数据流在某个时间范围内的数据，可以在增加start和end参数。<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_datapoints(key,device_id)</span><br><span class="line">&#123;<span class="string">&#x27;count&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;datastreams&#x27;</span>: [&#123;<span class="string">&#x27;datapoints&#x27;</span>: [&#123;<span class="string">&#x27;at&#x27;</span>: <span class="string">&#x27;2018-05-14 13:21:12.000&#x27;</span>, <span class="string">&#x27;value&#x27;</span>: <span class="number">20</span>&#125;], <span class="string">&#x27;id&#x27;</span>: <span class="string">&#x27;datastream&#x27;</span>&#125;]&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_datapoints(key,device_id,datastream_id = stream_id)</span><br><span class="line">&#123;<span class="string">&#x27;count&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;datastreams&#x27;</span>: [&#123;<span class="string">&#x27;datapoints&#x27;</span>: [&#123;<span class="string">&#x27;at&#x27;</span>: <span class="string">&#x27;2018-05-14 13:26:12.878&#x27;</span>, <span class="string">&#x27;value&#x27;</span>: <span class="string">&#x27;hello&#x27;</span>&#125;], <span class="string">&#x27;id&#x27;</span>: <span class="string">&#x27;datastream&#x27;</span>&#125;]&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二进制数据流："><a href="#二进制数据流：" class="headerlink" title="二进制数据流："></a>二进制数据流：</h3><h4 id="1-新增二进制数据流："><a href="#1-新增二进制数据流：" class="headerlink" title="1.新增二进制数据流："></a>1.新增二进制数据流：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_bindata(key,device_id,stream_id,bindata)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>stream_id：数据流名称<br><br>bindata: 要上传的普通二进制数据<br><br>返回：<br><br>若成功，则返回二进制数据索引号<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bindata = <span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.post_bindata(key,device_id,stream_id,bindata)</span><br><span class="line">&#123;<span class="string">&#x27;index&#x27;</span>: <span class="string">&#x27;31037105_xxxxxxxxxxx0_datastream&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-获取二进制数据流："><a href="#2-获取二进制数据流：" class="headerlink" title="2.获取二进制数据流："></a>2.获取二进制数据流：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_bindata(key,data_index)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>data_index：二进制数据索引号<br><br>返回：<br><br>若成功，则返回二进制数据<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_bindata(key,data_index)</span><br><span class="line"><span class="string">b&#x27;hello world!&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-新增文件："><a href="#3-新增文件：" class="headerlink" title="3.新增文件："></a>3.新增文件：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_file(key,device_id,stream_id,file_path)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>device_id： device_id<br><br>stream_id：数据流名称<br><br>file_path: 要上传的文件路径（包含文件名）<br><br>文件、图像等（最大限制为800k）<br><br>返回：<br><br>若成功，则返回文件索引号<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>file_path = <span class="string">&#x27;1.jpeg&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.post_file(key,device_id,stream_id,file_path)</span><br><span class="line">&#123;<span class="string">&#x27;index&#x27;</span>: <span class="string">&#x27;31037105_1xxxxxxxxxx_datastream&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-获取文件："><a href="#4-获取文件：" class="headerlink" title="4.获取文件："></a>4.获取文件：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_file(key,file_index)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>key：为masterkey 或者 设备apikey<br><br>file_index：文件索引号<br><br>可选参数：<br><br>file_path： 保存的文件路径（不含文件名）<br><br>否则保存在当前程序运行目录<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_file(key,file_index)</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>（文件已保存在当前程序运行目录）<br></p>
<h3 id="触发器："><a href="#触发器：" class="headerlink" title="触发器："></a>触发器：</h3><p>触发器的含义是：当指定范围内的数据点满足触发条件的要求时，会向url参数指定的地址发送post请求。</p>
<h4 id="1-创建触发器："><a href="#1-创建触发器：" class="headerlink" title="1.创建触发器："></a>1.创建触发器：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_trigger(master_key,url,trigger_type,trigger_threshold,**args)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>url:例：”<a target="_blank" rel="noopener" href="http://xx.bb.com/">http://xx.bb.com</a>“<br><br>trigger_type：&gt; | &gt;&#x3D; | &lt; | &lt;&#x3D; | &#x3D;&#x3D; | inout | in | out | change | frozen | live<br><br>trigger_threshold：阙值。<br><br>说明：<br></p>
<ol>
<li>type为&gt;|&gt;&#x3D;|&lt;|&lt;&#x3D;|&#x3D;&#x3D;时，threshold必须为数值。<br></li>
<li>type为inout时，threshold设置为{“lolmt”:40, “uplmt”:52}， 表示数据流的值首次进入或离开闭区间[40,52]时触发；<br></li>
<li>type为change时，threshold 参数不用传递；当上传的值有改变时触发告警。<br></li>
<li>type为frozen时，threshold 为数值，指定多少秒内未上报数据触发告警，同时被监控对象进入frozen状态。<br></li>
<li>type为live时，threshold为数值（必选大于0），指定当前上报数据点时间距离上次上报数据点时间间隔超过多少秒触发告警，一般与frozen配合使用。<br><br>可选参数：<br><br>“title”:”wen du jian kong”, &#x2F;&#x2F;设备名（可选）<br><br>“ds_id”:”gps”, &#x2F;&#x2F;数据流名称（id）（可选）<br><br>“dev_id”:”1027”, &#x2F;&#x2F;设备ID（可选）<br><br>“ds_uuids”:&#x2F;&#x2F;数据流uuid（可选）<br><br>说明：<br><br>触发器有三种工作触发模式<br><br>1)在请求参数中单独指定了ds_id，不包括其他参数，那么当前项目下所有设备的数据流中数据流名称符合ds_id的数据都会进入触发判断逻辑；<br><br>2)在请求参数中单独指定了ds_uuids数组，那么只有这些指定的数据流会进入触发判断逻辑；<br><br>3)在请求参数中指定了ds_id和dev_ids，那么只有这些指定的设备的数据流会进入触发判断逻辑。<br><br>返回：<br><br>若成功，则返回触发器ID<br><br>若失败，则返回错误信息<br><br>例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.create_trigger(master_key,url,<span class="string">&#x27;&gt;&#x27;</span>,<span class="number">10</span>,ds_id = stream_id)</span><br><span class="line">&#123;<span class="string">&#x27;trigger_id&#x27;</span>: <span class="number">112410</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.create_trigger(master_key,url,<span class="string">&#x27;&gt;&#x27;</span>,<span class="number">10</span>,ds_id = stream_id,dev_id = device_id)</span><br><span class="line">&#123;<span class="string">&#x27;trigger_id&#x27;</span>: <span class="number">112411</span>&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-修改触发器参数："><a href="#2-修改触发器参数：" class="headerlink" title="2.修改触发器参数："></a>2.修改触发器参数：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modify_trigger(master_key,trigger_id,**args)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>trigger_id：触发器ID<br><br>可选参数：<br><br>“title”:”wen du jian kong”, &#x2F;&#x2F;设备名（可选）<br><br>“ds_id”:”gps”, &#x2F;&#x2F;数据流名称（id）（可选）<br><br>“dev_id”:”1027”, &#x2F;&#x2F;设备ID（可选）<br><br>“ds_uuids”: &#x2F;&#x2F;数据流uuid（可选）<br><br>“url”:”&#x2F;&#x2F;xx.bb.com”,<br><br>“type”:”&gt; | &gt;&#x3D; | &lt; | &lt;&#x3D; | &#x3D;&#x3D; | inout | in | out | change | frozen | live”,<br><br>“threshold”:100 <br><br>说明：<br><br>1.可选参数ds_id、dev_id、ds_uuids至少要传入一个。<br><br>2.要修改type或者threshold时，必须同时传入这两个参数才能够生效。<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.modify_trigger(master_key,trigger_id,ds_id = stream_id,<span class="built_in">type</span> = <span class="string">&#x27;&gt;=&#x27;</span>,threshold = <span class="number">100</span>)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-获取指定触发器信息："><a href="#3-获取指定触发器信息：" class="headerlink" title="3.获取指定触发器信息："></a>3.获取指定触发器信息：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_trigger_info(master_key,trigger_id)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>trigger_id：触发器ID<br><br>返回：<br><br>若成功，则返回触发器信息<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_trigger_info(master_key,trigger_id)</span><br><span class="line">&#123;<span class="string">&#x27;create_time&#x27;</span>: <span class="string">&#x27;2018-05-14 14:07:26&#x27;</span>, <span class="string">&#x27;target_type&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;threshold&#x27;</span>: <span class="number">100</span>, <span class="string">&#x27;id&#x27;</span>: <span class="number">112411</span>, <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;&gt;=&#x27;</span>, <span class="string">&#x27;ds_id&#x27;</span>: <span class="string">&#x27;datastream&#x27;</span>, <span class="string">&#x27;url&#x27;</span>: <span class="string">&#x27;http://www.mrbluyee.com&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-获取所有触发器信息："><a href="#4-获取所有触发器信息：" class="headerlink" title="4.获取所有触发器信息："></a>4.获取所有触发器信息：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_all_triggers_info(master_key)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>返回：<br><br>若成功，则返回所有触发器信息<br><br>若失败，则返回错误信息<br><br>例：<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.get_all_triggers_info(master_key)</span><br></pre></td></tr></table></figure>
<h4 id="5-删除触发器："><a href="#5-删除触发器：" class="headerlink" title="5.删除触发器："></a>5.删除触发器：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete_trigger(master_key,trigger_id)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>trigger_id：触发器ID<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.delete_trigger(master_key,trigger_id)</span><br><span class="line"><span class="string">&#x27;succ&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="APIKEY"><a href="#APIKEY" class="headerlink" title="APIKEY:"></a>APIKEY:</h3><h4 id="1-创建APIKey："><a href="#1-创建APIKey：" class="headerlink" title="1.创建APIKey："></a>1.创建APIKey：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_apikey(master_key,key_title,resources,access_methods)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>key_title： key的名称<br><br>resources：被授权的资源<br><br>参数格式：<br><br>resources &#x3D; ({“dev_id”: device_id1},{“dev_id”: device_id2})<br><br>access_methods：被授权的命令<br><br>参数格式：<br><br>access_methods &#x3D;（’get’,’put’)<br><br>说明：授权命令是可选的，另外被授权的命令也可以是get、put、post的一个或几个，如只授权get和put命令：”access_methods”: [“get”,”put”]<br><br>返回：<br><br>若成功，则返回key_string<br><br>若失败，则返回错误信息<br></p>
<h4 id="2-修改APIKey："><a href="#2-修改APIKey：" class="headerlink" title="2.修改APIKey："></a>2.修改APIKey：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modify_apikey(master_key,key_string,**args)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>key_string： key_string<br><br>可选参数：<br><br>title： key的名称<br><br>resources：被授权的资源<br><br>access_methods：被授权的命令<br><br>说明：<br><br>1.对于master key不允许更新操作，masterkey默认具有最大权限，可以访问该用户名下所有设备、所有数据，可以进行POST、GET、PUT、DELETE操作。<br><br>如果更新master key系统会返回失败。<br><br>2..API key更新是覆盖操作，会将原来存在的授权资源和授权命令覆盖，不会保留原来的授权资源和授权命令。<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br></p>
<h4 id="3-获取APIKey信息："><a href="#3-获取APIKey信息：" class="headerlink" title="3.获取APIKey信息："></a>3.获取APIKey信息：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_apikey_info(master_key,**args)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>可选参数：<br><br>key &#x3D; key_string&#x2F;&#x2F;可选，只查看该key相关信息<br><br>page &#x3D; 1 &#x2F;&#x2F;指定页码, 可选<br><br>per_page &#x3D; 10 &#x2F;&#x2F;指定每页输出个数,可选,默认10，最多100<br><br>device_id &#x3D; xxbbcc&#x2F;&#x2F;可选,只查看与该设备相关的非master-key<br><br>返回：<br><br>若成功，则返回APIKey信息<br><br>若失败，则返回错误信息<br></p>
<h4 id="4-删除APIKey："><a href="#4-删除APIKey：" class="headerlink" title="4.删除APIKey："></a>4.删除APIKey：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete_apikey(master_key,key_string)</span><br></pre></td></tr></table></figure>
<p>参数：<br><br>master_key：masterkey<br><br>key_string： key_string<br><br>返回：<br><br>若成功，则返回’succ’<br><br>若失败，则返回错误信息<br></p>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>本文标题：</span>使用Python urllib3构造OneNET HTTP SDK</p><p><span>文章作者：</span>Mr Bluyee</p><p><span>发布时间：</span>2018-07-16</p><p><span>最后更新：</span>2019-07-15</p><p><span>原始链接：</span><a href="/2018/07/16/使用Python-urllib3构造OneNET-HTTP-SDK/">https://www.mrbluyee.com/2018/07/16/%E4%BD%BF%E7%94%A8Python-urllib3%E6%9E%84%E9%80%A0OneNET-HTTP-SDK/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://www.mrbluyee.com/2018/07/16/%E4%BD%BF%E7%94%A8Python-urllib3%E6%9E%84%E9%80%A0OneNET-HTTP-SDK/"></i></span></p><p><span>版权声明：</span>The author owns the copyright, please indicate the source reproduced.</p></div><br><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul></div><div class="post-nav"><a class="pre" href="/2018/07/17/Python-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">Python 正则表达式</a><a class="next" href="/2018/07/14/Python-urllib3/">Python urllib3</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zOTYxNS8xNjE0Mg"><script>(function(d, s) {
  var j, e = d.getElementsByTagName(s)[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img class="nofancybox" src="/img/avatar.jpeg"/></a><p>Enjoy life / Hope for future</p><a class="info-icon" href="mr.bluyee@hotmail.com" title="mr.bluyee@hotmail.com" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/MrBluyee" title="https://github.com/MrBluyee" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94AI/">学习笔记——AI</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94C-%E7%AE%97%E6%B3%95/">学习笔记——C 算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">学习笔记——C数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Python/">学习笔记——Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94android/">学习笔记——android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94data-compression/">学习笔记——data compression</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94expert-c-programming/">学习笔记——expert c programming</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94linux/">学习笔记——linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94opencv/">学习笔记——opencv</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">学习笔记——代码管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E4%BD%8E%E5%8A%9F%E8%80%97%E6%8A%80%E6%9C%AF/">学习笔记——低功耗技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/">学习笔记——嵌入式开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">学习笔记——机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E7%89%A9%E8%81%94%E7%BD%91/">学习笔记——物联网</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/">学习笔记——网络协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">学习笔记——计算机系统</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">计算机系统</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/C/" style="font-size: 15px;">C</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" style="font-size: 15px;">网络协议</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" style="font-size: 15px;">嵌入式开发</a> <a href="/tags/AI/" style="font-size: 15px;">AI</a> <a href="/tags/data-compression/" style="font-size: 15px;">data compression</a> <a href="/tags/opencv/" style="font-size: 15px;">opencv</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/04/07/Retrieval-Augmented-Generation-RAG/">Retrieval Augmented Generation (RAG)</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/04/basic-concepts-about-the-LLM/">basic concepts about the LLM</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/02/anything-LLM-with-ollama-a-private-document-chatbot/">anything LLM with ollama - a private document chatbot</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/02/open-webui-with-ollama-ChatGPT-like-interface/">open-webui with ollama - ChatGPT like interface</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/02/ollama-run-large-language-models-locally/">ollama - run large language models locally</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/03/28/huffman-coding-in-deflate/">huffman coding in deflate</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/03/25/zlib-and-gzip-format/">zlib and gzip format</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/03/23/deflate%20format/">deflate format</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/23/IPsec/">IPsec</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/21/%E6%95%B0%E7%9A%84%E7%B4%A0%E6%80%A7%E6%B5%8B%E8%AF%95/">数的素性测试</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/." rel="nofollow">Mr Bluyee's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>