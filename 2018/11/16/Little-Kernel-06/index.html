<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Little Kernel 06 | Mr Bluyee's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + '3dbaf3043b34b1c894c4cd063629b6a9';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Little Kernel 06</h1><a id="logo" href="/.">Mr Bluyee's Blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Little Kernel 06</h1><div class="post-meta">2018-11-16<span> | </span><span class="category"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/">学习笔记——嵌入式开发</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.8k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 9</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#lk%E5%90%AF%E5%8A%A8%E6%B1%87%E7%BC%96%E9%83%A8%E5%88%86"><span class="toc-number">1.</span> <span class="toc-text">lk启动汇编部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#arm-%E6%B1%87%E7%BC%96%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">arm 汇编简单介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B1%87%E7%BC%96"><span class="toc-number">1.1.1.</span> <span class="toc-text">汇编</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MRC-MCR%E6%8C%87%E4%BB%A4"><span class="toc-number">1.1.2.</span> <span class="toc-text">MRC&#x2F;MCR指令:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MRS-MSR"><span class="toc-number">1.1.3.</span> <span class="toc-text">MRS&#x2F;MSR:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CP15-%E4%B8%AD%E7%9A%84%E5%AF%84%E5%AD%98%E5%99%A8-C1-%E7%9A%84%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E5%8F%8A%E5%90%AB%E4%B9%89%E8%AF%B4%E6%98%8E%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="toc-number">1.1.4.</span> <span class="toc-text">CP15 中的寄存器 C1 的编码格式及含义说明如下：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CPSR-%E5%BD%93%E5%89%8D%E7%A8%8B%E5%BA%8F%E7%8A%B6%E6%80%81%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">1.1.5.</span> <span class="toc-text">CPSR 当前程序状态寄存器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lk-arch-arm-arm-start-S"><span class="toc-number">1.2.</span> <span class="toc-text">lk&#x2F;arch&#x2F;arm&#x2F;arm&#x2F;start.S</span></a></li></ol></li></ol></div></div><div class="post-content"><h3 id="lk启动汇编部分"><a href="#lk启动汇编部分" class="headerlink" title="lk启动汇编部分"></a>lk启动汇编部分</h3><span id="more"></span>

<h4 id="arm-汇编简单介绍"><a href="#arm-汇编简单介绍" class="headerlink" title="arm 汇编简单介绍"></a>arm 汇编简单介绍</h4><h5 id="汇编"><a href="#汇编" class="headerlink" title="汇编"></a>汇编</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">b:  用于不返回的跳转，比如跳到某个标号处，b  .  </span><br><span class="line">        其中的‘.’代表当前地址，那么 b  .  就是死循环。</span><br><span class="line">bl: 用于子程序跳转，要返回地址，返回地址存于LR中。</span><br><span class="line">        当发生bl跳转前，会在寄存器 R14 （即LR）中保存当前PC-4，即bl跳转指令的下一条指令的地址。</span><br><span class="line">        所以在返回时只要 MOV pc,lr 。</span><br><span class="line">pc: 正在执行的代码地址</span><br></pre></td></tr></table></figure>

<h5 id="MRC-MCR指令"><a href="#MRC-MCR指令" class="headerlink" title="MRC&#x2F;MCR指令:"></a>MRC&#x2F;MCR指令:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mrc p15, 0, r0, c1, c0&#123;, 0&#125;     ；将 CP15 的寄存器 C1 的值读到 r0 中</span><br><span class="line">mcr p15, 0, r0, c1, c0&#123;, 0&#125;     ；将 r0 的值写到 CP15 的寄存器 C1 中</span><br></pre></td></tr></table></figure>

<h5 id="MRS-MSR"><a href="#MRS-MSR" class="headerlink" title="MRS&#x2F;MSR:"></a>MRS&#x2F;MSR:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MRS： 程序状态寄存器到通用寄存器的数据传送指令</span><br><span class="line">MSR： 通用寄存器到程序状态寄存器的数据传送指令</span><br></pre></td></tr></table></figure>

<h5 id="CP15-中的寄存器-C1-的编码格式及含义说明如下："><a href="#CP15-中的寄存器-C1-的编码格式及含义说明如下：" class="headerlink" title="CP15 中的寄存器 C1 的编码格式及含义说明如下："></a>CP15 中的寄存器 C1 的编码格式及含义说明如下：</h5><p>C1中的控制位含义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">M（bit[0]）</span><br><span class="line">0 ：禁止 MMU 或者 PU</span><br><span class="line">1 ：使能 MMU 或者 PU</span><br><span class="line"></span><br><span class="line">A（bit[1]）</span><br><span class="line">0 ：禁止地址对齐检查</span><br><span class="line">1 ：使能地址对齐检查</span><br><span class="line"></span><br><span class="line">C（bit[2]）</span><br><span class="line">当数据cache和指令cache分开时，本控制位禁止/使能数据cache。当数据cache和指令cache统一时，该控制位禁止/使能整个cache。</span><br><span class="line">0 ：禁止数据 / 整个 cache</span><br><span class="line">1 ：使能数据 / 整个 cache</span><br><span class="line"></span><br><span class="line">W（bit[3]）</span><br><span class="line">0 ：禁止写缓冲</span><br><span class="line">1 ：使能写缓冲</span><br><span class="line"></span><br><span class="line">P（bit[4]）</span><br><span class="line">0 ：异常中断处理程序进入 32 位地址模式</span><br><span class="line">1 ：异常中断处理程序进入26 位地址模式</span><br><span class="line"></span><br><span class="line">D（bit[5]）</span><br><span class="line">0 ：禁止 26 位地址异常检查</span><br><span class="line">1 ：使能 26 位地址异常检查</span><br><span class="line"></span><br><span class="line">L（bit[6]）</span><br><span class="line">0 ：选择早期中止模型</span><br><span class="line">1 ：选择后期中止模型</span><br><span class="line"></span><br><span class="line">B（bit[7]）</span><br><span class="line">0 ： little endian </span><br><span class="line">1 ： big endian</span><br><span class="line"></span><br><span class="line">S（bit[8]）</span><br><span class="line">在基于 MMU 的存储系统中，本位用作系统保护</span><br><span class="line"></span><br><span class="line">R（bit[9]）</span><br><span class="line">在基于 MMU 的存储系统中，本位用作 ROM 保护</span><br><span class="line"></span><br><span class="line">F（bit[10]）</span><br><span class="line">由生产商定义</span><br><span class="line"></span><br><span class="line">Z（bit[11]）</span><br><span class="line">0 ：禁止跳转预测功能</span><br><span class="line">1 ：使能跳转预测功能</span><br><span class="line"></span><br><span class="line">I（bit[12]）</span><br><span class="line">当数据cache和指令cache是分开的，本控制位禁止/使能指令cache</span><br><span class="line">0 ：禁止指令 cache </span><br><span class="line">1 ：使能指令 cache</span><br><span class="line"></span><br><span class="line">V（bit[13]）</span><br><span class="line">0 ：选择低端异常中断向量 0x0~0x1c</span><br><span class="line">1 ：选择高端异常中断向量0xffff0000~ 0xffff001c</span><br><span class="line"></span><br><span class="line">PR（bit[14]）</span><br><span class="line">0 ：常规的 cache 淘汰算法，如随机淘汰</span><br><span class="line">1 ：预测性淘汰算法，如round-robin 淘汰算法</span><br><span class="line"></span><br><span class="line">L4（bit[15]）</span><br><span class="line">0 ：保持 ARMv5 以上版本的正常功能</span><br><span class="line">1 ：将 ARMv5 以上版本与以前版本处理器兼容，不根据跳转地址的 bit[0] 进行 ARM 指令和 Thumb 状态切换： bit[0] 等于 0 表示 ARM 指令，等于 1 表示 Thumb 指令</span><br><span class="line"></span><br><span class="line">Bits[31:16]）</span><br><span class="line">保留将来使用</span><br></pre></td></tr></table></figure>

<h5 id="CPSR-当前程序状态寄存器"><a href="#CPSR-当前程序状态寄存器" class="headerlink" title="CPSR 当前程序状态寄存器"></a>CPSR 当前程序状态寄存器</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">bit32</span><br><span class="line">bit[31：24]为条件标志位域，用f 表示；</span><br><span class="line">bit[23：16]为状态位域，用s 表示；</span><br><span class="line">bit[15：8]为扩展位域，用x 表示；</span><br><span class="line">bit[7：0]为控制位域，用c 表示；</span><br><span class="line"></span><br><span class="line">运行模式位[4-0]</span><br><span class="line"> 0b10000 用户模式user</span><br><span class="line"> 0b10001 FIQ模式</span><br><span class="line"> 0b10010 IRQ模式</span><br><span class="line"> 0b10011 管理模式</span><br><span class="line"> 0b10111 终止模式Abort</span><br><span class="line"> 0b11011 未定义模式</span><br><span class="line"> 0b11111 系统模式</span><br><span class="line">IFT[7-5],I=1禁止IRQ,F=1禁止FIQ,T=1执行thumb指令</span><br><span class="line"></span><br><span class="line">[27-8]保留</span><br><span class="line"></span><br><span class="line">NZCV[31-28]</span><br><span class="line">N-(负)标志,N=1表示运算结果为负数,N=0表示运算结果为正数或零</span><br><span class="line">Z-(零)标志,Z=1表示运算结果为零，Z=0表示运算结果为非零</span><br><span class="line">C-(进位)标志</span><br><span class="line">V-(溢出)标志</span><br></pre></td></tr></table></figure>

<h4 id="lk-arch-arm-arm-start-S"><a href="#lk-arch-arm-arm-start-S" class="headerlink" title="lk&#x2F;arch&#x2F;arm&#x2F;arm&#x2F;start.S"></a>lk&#x2F;arch&#x2F;arm&#x2F;arm&#x2F;start.S</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;asm.h&gt;</span><br><span class="line">#include &lt;arch/arm/cores.h&gt;</span><br><span class="line">#include &lt;arch/arm/mmu.h&gt;</span><br><span class="line">#include &lt;kernel/vm.h&gt;</span><br><span class="line"></span><br><span class="line">.section &quot;.text.boot&quot;</span><br><span class="line">.globl _start    // 声明全局符号_start</span><br><span class="line">_start:</span><br><span class="line">    b   platform_reset</span><br><span class="line">    b   arm_undefined</span><br><span class="line">    b   arm_syscall</span><br><span class="line">    b   arm_prefetch_abort</span><br><span class="line">    b   arm_data_abort</span><br><span class="line">    b   arm_reserved</span><br><span class="line">    b   arm_irq</span><br><span class="line">    b   arm_fiq</span><br><span class="line">#if WITH_SMP</span><br><span class="line">    b   arm_reset</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">.weak platform_reset</span><br><span class="line">platform_reset:</span><br><span class="line">    /* Fall through for the weak symbol */</span><br><span class="line"></span><br><span class="line">.globl arm_reset</span><br><span class="line">arm_reset:</span><br><span class="line">    /* do some early cpu setup */</span><br><span class="line">    mrc     p15, 0, r12, c1, c0, 0</span><br><span class="line">    /* i/d cache disable, mmu disabled */</span><br><span class="line">    bic     r12, #(1&lt;&lt;12)</span><br><span class="line">    bic     r12, #(1&lt;&lt;2 | 1&lt;&lt;0)</span><br><span class="line">#if WITH_KERNEL_VM</span><br><span class="line">    /* enable caches so atomics and spinlocks work */</span><br><span class="line">    orr     r12, r12, #(1&lt;&lt;12)</span><br><span class="line">    orr     r12, r12, #(1&lt;&lt;2)</span><br><span class="line">#endif // WITH_KERNEL_VM</span><br><span class="line">    mcr     p15, 0, r12, c1, c0, 0</span><br><span class="line"></span><br><span class="line">    /* calculate the physical offset from our eventual virtual location */</span><br><span class="line">.Lphys_offset:</span><br><span class="line">    ldr     r4, =.Lphys_offset</span><br><span class="line">    adr     r11, .Lphys_offset</span><br><span class="line">    sub     r11, r11, r4</span><br><span class="line"></span><br><span class="line">#if WITH_SMP</span><br><span class="line">    /* figure out our cpu number */</span><br><span class="line">    mrc     p15, 0, r12, c0, c0, 5 /* read MPIDR */</span><br><span class="line"></span><br><span class="line">    /* mask off the bottom bits to test cluster number:cpu number */</span><br><span class="line">    ubfx    r12, r12, #0, #SMP_CPU_ID_BITS</span><br><span class="line"></span><br><span class="line">    /* if we&#x27;re not cpu 0:0, fall into a trap and wait */</span><br><span class="line">    teq     r12, #0</span><br><span class="line">    movne   r0, r12</span><br><span class="line">    bne     arm_secondary_setup</span><br><span class="line">#endif // WITH_SMP</span><br><span class="line"></span><br><span class="line">#if WITH_CPU_EARLY_INIT</span><br><span class="line">    /* call platform/arch/etc specific init code */</span><br><span class="line">    bl      __cpu_early_init</span><br><span class="line">#endif // WITH_CPU_EARLY_INIT</span><br><span class="line"></span><br><span class="line">#if WITH_NO_PHYS_RELOCATION</span><br><span class="line">    /* assume that image is properly loaded in physical memory */</span><br><span class="line">#else</span><br><span class="line">    /* see if we need to relocate to our proper location in physical memory */</span><br><span class="line">    adr     r4, _start                           /* this emits sub r4, pc, #constant */</span><br><span class="line">    ldr     r5, =(MEMBASE + KERNEL_LOAD_OFFSET)  /* calculate the binary&#x27;s physical load address */</span><br><span class="line">    subs    r12, r4, r5                          /* calculate the delta between where we&#x27;re loaded and the proper spot */</span><br><span class="line">    beq     .Lrelocate_done</span><br><span class="line"></span><br><span class="line">    /* we need to relocate ourselves to the proper spot */</span><br><span class="line">    ldr     r6, =__data_end</span><br><span class="line">    ldr     r7, =(KERNEL_BASE - MEMBASE)</span><br><span class="line">    sub     r6, r7</span><br><span class="line">    add     r6, r12</span><br><span class="line"></span><br><span class="line">.Lrelocate_loop:             // 进行循环拷贝，将代码段拷贝到代码地址处</span><br><span class="line">    ldr     r7, [r4], #4</span><br><span class="line">    str     r7, [r5], #4</span><br><span class="line">    cmp     r4, r6           // 判断拷贝是否完成</span><br><span class="line">    bne     .Lrelocate_loop</span><br><span class="line"></span><br><span class="line">    /* we&#x27;re relocated, jump to the right address */</span><br><span class="line">    sub     pc, r12</span><br><span class="line">    nop     /* skipped in the add to pc */</span><br><span class="line"></span><br><span class="line">    /* recalculate the physical offset */</span><br><span class="line">    sub     r11, r11, r12</span><br><span class="line"></span><br><span class="line">.Lrelocate_done:</span><br><span class="line">#endif // !WITH_NO_PHYS_RELOCATION</span><br><span class="line"></span><br><span class="line">#if ARM_WITH_MMU</span><br><span class="line">.Lsetup_mmu:</span><br><span class="line"></span><br><span class="line">    /* set up the mmu according to mmu_initial_mappings */</span><br><span class="line"></span><br><span class="line">    /* load the base of the translation table and clear the table */</span><br><span class="line">    ldr     r4, =arm_kernel_translation_table</span><br><span class="line">    add     r4, r4, r11</span><br><span class="line">        /* r4 = physical address of translation table */</span><br><span class="line"></span><br><span class="line">    mov     r5, #0</span><br><span class="line">    mov     r6, #0</span><br><span class="line"></span><br><span class="line">    /* walk through all the entries in the translation table, setting them up */</span><br><span class="line">0:</span><br><span class="line">    str     r5, [r4, r6, lsl #2]</span><br><span class="line">    add     r6, #1</span><br><span class="line">    cmp     r6, #4096</span><br><span class="line">    bne     0b</span><br><span class="line"></span><br><span class="line">    /* load the address of the mmu_initial_mappings table and start processing */</span><br><span class="line">    ldr     r5, =mmu_initial_mappings</span><br><span class="line">    add     r5, r5, r11</span><br><span class="line">        /* r5 = physical address of mmu initial mapping table */</span><br><span class="line"></span><br><span class="line">.Linitial_mapping_loop:</span><br><span class="line">    ldmia   r5!, &#123; r6-r10 &#125;</span><br><span class="line">        /* r6 = phys, r7 = virt, r8 = size, r9 = flags, r10 = name */</span><br><span class="line"></span><br><span class="line">    /* round size up to 1MB alignment */</span><br><span class="line">    ubfx        r10, r6, #0, #20</span><br><span class="line">    add     r8, r8, r10</span><br><span class="line">    add     r8, r8, #(1 &lt;&lt; 20)</span><br><span class="line">    sub     r8, r8, #1</span><br><span class="line"></span><br><span class="line">    /* mask all the addresses and sizes to 1MB boundaries */</span><br><span class="line">    lsr     r6, #20  /* r6 = physical address / 1MB */</span><br><span class="line">    lsr     r7, #20  /* r7 = virtual address / 1MB */</span><br><span class="line">    lsr     r8, #20  /* r8 = size in 1MB chunks */</span><br><span class="line"></span><br><span class="line">    /* if size == 0, end of list */</span><br><span class="line">    cmp     r8, #0</span><br><span class="line">    beq     .Linitial_mapping_done</span><br><span class="line"></span><br><span class="line">    /* set up the flags */</span><br><span class="line">    ldr     r10, =MMU_KERNEL_L1_PTE_FLAGS</span><br><span class="line">    teq     r9, #MMU_INITIAL_MAPPING_FLAG_UNCACHED</span><br><span class="line">    ldreq   r10, =MMU_INITIAL_MAP_STRONGLY_ORDERED</span><br><span class="line">    beq     0f</span><br><span class="line">    teq     r9, #MMU_INITIAL_MAPPING_FLAG_DEVICE</span><br><span class="line">    ldreq   r10, =MMU_INITIAL_MAP_DEVICE</span><br><span class="line">        /* r10 = mmu entry flags */</span><br><span class="line"></span><br><span class="line">0:</span><br><span class="line">    orr     r12, r10, r6, lsl #20</span><br><span class="line">        /* r12 = phys addr | flags */</span><br><span class="line"></span><br><span class="line">    /* store into appropriate translation table entry */</span><br><span class="line">    str     r12, [r4, r7, lsl #2]</span><br><span class="line"></span><br><span class="line">    /* loop until we&#x27;re done */</span><br><span class="line">    add     r6, #1</span><br><span class="line">    add     r7, #1</span><br><span class="line">    subs    r8, #1</span><br><span class="line">    bne     0b</span><br><span class="line"></span><br><span class="line">    b       .Linitial_mapping_loop</span><br><span class="line"></span><br><span class="line">.Linitial_mapping_done:</span><br><span class="line"></span><br><span class="line">#if MMU_WITH_TRAMPOLINE</span><br><span class="line">    /* move arm_kernel_translation_table address to r8 and</span><br><span class="line">     * set cacheable attributes on translation walk</span><br><span class="line">     */</span><br><span class="line">    orr     r8, r4, #MMU_TTBRx_FLAGS</span><br><span class="line"></span><br><span class="line">    /* Prepare tt_trampoline page table */</span><br><span class="line">    /* Calculate pagetable physical addresses */</span><br><span class="line">    ldr     r4, =tt_trampoline  /* r4 = tt_trampoline vaddr */</span><br><span class="line">    add     r4, r4, r11     /* r4 = tt_trampoline paddr */</span><br><span class="line"></span><br><span class="line">    /* Zero tt_trampoline translation tables */</span><br><span class="line">    mov     r6, #0</span><br><span class="line">    mov     r7, #0</span><br><span class="line">1:</span><br><span class="line">    str     r7, [r4, r6, lsl#2]</span><br><span class="line">    add     r6, #1</span><br><span class="line">    cmp     r6, #0x1000</span><br><span class="line">    blt     1b</span><br><span class="line"></span><br><span class="line">    /* Setup 1M section mapping at</span><br><span class="line">     * phys  -&gt; phys   and</span><br><span class="line">     * virt  -&gt; phys</span><br><span class="line">     */</span><br><span class="line">    lsr     r6, pc, #20     /* r6 = paddr index */</span><br><span class="line">    ldr     r7, =MMU_KERNEL_L1_PTE_FLAGS</span><br><span class="line">    add     r7, r7, r6, lsl #20 /* r7 = pt entry */</span><br><span class="line"></span><br><span class="line">    str     r7, [r4, r6, lsl #2]    /* tt_trampoline[paddr index] = pt entry */</span><br><span class="line"></span><br><span class="line">    rsb     r6, r11, r6, lsl #20    /* r6 = vaddr */</span><br><span class="line">    str     r7, [r4, r6, lsr #(20 - 2)] /* tt_trampoline[vaddr index] = pt entry */</span><br><span class="line">#endif // MMU_WITH_TRAMPOLINE</span><br><span class="line"></span><br><span class="line">    /* set up the mmu */</span><br><span class="line">    bl      .Lmmu_setup</span><br><span class="line">#endif // WITH_KERNEL_VM</span><br><span class="line"></span><br><span class="line">    /* at this point we&#x27;re running at our final location in virtual memory (if enabled) */</span><br><span class="line">.Lstack_setup:</span><br><span class="line">    /* set up the stack for irq, fiq, abort, undefined, system/user, and lastly supervisor mode */</span><br><span class="line">    mov     r12, #0</span><br><span class="line"></span><br><span class="line">    cpsid   i,#0x12       /* irq */</span><br><span class="line">    mov     sp, r12</span><br><span class="line"></span><br><span class="line">    cpsid   i,#0x11       /* fiq */</span><br><span class="line">    mov     sp, r12</span><br><span class="line"></span><br><span class="line">    cpsid   i,#0x17       /* abort */</span><br><span class="line">    mov     sp, r12</span><br><span class="line"></span><br><span class="line">    cpsid   i,#0x1b       /* undefined */</span><br><span class="line">    mov     sp, r12</span><br><span class="line"></span><br><span class="line">    cpsid   i,#0x1f       /* system */</span><br><span class="line">    mov     sp, r12</span><br><span class="line"></span><br><span class="line">    cpsid   i,#0x13       /* supervisor */</span><br><span class="line">    ldr     r12, =abort_stack</span><br><span class="line">    add     r12, #ARCH_DEFAULT_STACK_SIZE</span><br><span class="line">    mov     sp, r12</span><br><span class="line"></span><br><span class="line">    /* stay in supervisor mode from now on out */</span><br><span class="line"></span><br><span class="line">    /* copy the initialized data segment out of rom if necessary */</span><br><span class="line">    ldr     r4, =__data_start_rom</span><br><span class="line">    ldr     r5, =__data_start</span><br><span class="line">    ldr     r6, =__data_end</span><br><span class="line"></span><br><span class="line">    cmp     r4, r5</span><br><span class="line">    beq     .L__do_bss</span><br><span class="line"></span><br><span class="line">.L__copy_loop:</span><br><span class="line">    cmp     r5, r6</span><br><span class="line">    ldrlt   r7, [r4], #4</span><br><span class="line">    strlt   r7, [r5], #4</span><br><span class="line">    blt     .L__copy_loop</span><br><span class="line"></span><br><span class="line">.L__do_bss:</span><br><span class="line">#if FOR_VERIFICATION_DONT_CLEAR_BSS == 0</span><br><span class="line">    /* clear out the bss */</span><br><span class="line">    ldr     r4, =__bss_start</span><br><span class="line">    ldr     r5, =_end</span><br><span class="line">    mov     r6, #0</span><br><span class="line">.L__bss_loop:</span><br><span class="line">    cmp     r4, r5</span><br><span class="line">    strlt   r6, [r4], #4</span><br><span class="line">    blt     .L__bss_loop</span><br><span class="line">#endif</span><br><span class="line">#if FOR_VERIFICATION == 1</span><br><span class="line">    mov r0, #0</span><br><span class="line">    mov r1, #0</span><br><span class="line">    mov r2, #0</span><br><span class="line">    mov r3, #0</span><br><span class="line">#endif</span><br><span class="line">    bl      lk_main</span><br><span class="line">    b       .</span><br></pre></td></tr></table></figure></div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>本文标题：</span>Little Kernel 06</p><p><span>文章作者：</span>Mr Bluyee</p><p><span>发布时间：</span>2018-11-16</p><p><span>最后更新：</span>2019-07-15</p><p><span>原始链接：</span><a href="/2018/11/16/Little-Kernel-06/">https://www.mrbluyee.com/2018/11/16/Little-Kernel-06/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://www.mrbluyee.com/2018/11/16/Little-Kernel-06/"></i></span></p><p><span>版权声明：</span>The author owns the copyright, please indicate the source reproduced.</p></div><br><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" rel="tag">嵌入式开发</a></li></ul></div><div class="post-nav"><a class="pre" href="/2018/11/16/02-%E5%B9%B6%E5%8F%91%E5%92%8C%E5%B9%B6%E8%A1%8C/">02 并发和并行</a><a class="next" href="/2018/11/15/Little-Kernel-05/">Little Kernel 05</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zOTYxNS8xNjE0Mg"><script>(function(d, s) {
  var j, e = d.getElementsByTagName(s)[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img class="nofancybox" src="/img/avatar.jpeg"/></a><p>Enjoy life / Hope for future</p><a class="info-icon" href="mr.bluyee@hotmail.com" title="mr.bluyee@hotmail.com" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/MrBluyee" title="https://github.com/MrBluyee" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94C-%E7%AE%97%E6%B3%95/">学习笔记——C 算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">学习笔记——C数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Python/">学习笔记——Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94android/">学习笔记——android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94expert-c-programming/">学习笔记——expert c programming</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94linux/">学习笔记——linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94opencv/">学习笔记——opencv</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">学习笔记——代码管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E4%BD%8E%E5%8A%9F%E8%80%97%E6%8A%80%E6%9C%AF/">学习笔记——低功耗技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/">学习笔记——嵌入式开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9/">学习笔记——数据压缩</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">学习笔记——机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E7%89%A9%E8%81%94%E7%BD%91/">学习笔记——物联网</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/">学习笔记——网络协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/">学习笔记——计算机系统</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">计算机系统</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/C/" style="font-size: 15px;">C</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" style="font-size: 15px;">网络协议</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/" style="font-size: 15px;">嵌入式开发</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9/" style="font-size: 15px;">数据压缩</a> <a href="/tags/opencv/" style="font-size: 15px;">opencv</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/03/23/deflate%E6%97%A0%E6%8D%9F%E5%8E%8B%E7%BC%A9%E7%BC%96%E7%A0%81/">deflate无损压缩编码</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/23/IPsec/">IPsec</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/21/%E6%95%B0%E7%9A%84%E7%B4%A0%E6%80%A7%E6%B5%8B%E8%AF%95/">数的素性测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/20/%E6%89%A9%E5%B1%95%E7%9A%84%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E7%AE%97%E6%B3%95/">扩展的欧几里得算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/17/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E7%AE%97%E6%B3%95-%E6%B1%82%E6%9C%80%E5%A4%A7%E5%85%AC%E5%9B%A0%E6%95%B0/">欧几里得算法-求最大公因数</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/04/%E5%B8%B8%E7%94%A8%E8%B7%AF%E7%94%B1%E6%96%B9%E5%BC%8F/">常用路由方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/19/%E6%97%A0%E7%BA%BF%E4%BC%A0%E6%84%9F%E7%BD%91WSN%E6%A6%82%E8%BF%B0/">无线传感网WSN概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/18/%E6%97%A0%E7%BA%BF%E6%A8%A1%E5%9D%97%E4%BC%91%E7%9C%A0%E4%B8%8E%E6%BF%80%E6%B4%BB%E6%9C%BA%E5%88%B6/">无线模块休眠与激活机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/16/SOC%E7%9A%84%E4%BD%8E%E5%8A%9F%E8%80%97%E8%AE%BE%E8%AE%A1/">SOC的低功耗设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/03/%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E7%9A%84%E4%BD%8E%E5%8A%9F%E8%80%97/">电源管理的低功耗</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/." rel="nofollow">Mr Bluyee's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>